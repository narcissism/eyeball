<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Stable 3D Eyeball</title>
<style>
  body { margin:0; overflow:hidden; background:#000; }
</style>
</head>
<body>

<script src="https://unpkg.com/three@0.155.0/build/three.min.js"></script>

<script>
/* ---------- SCENE ---------- */
const scene = new THREE.Scene();

/* ---------- CAMERA ---------- */
const camera = new THREE.PerspectiveCamera(45, innerWidth / innerHeight, 0.1, 100);
camera.position.z = 3;

/* ---------- RENDERER ---------- */
const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* ---------- LIGHT ---------- */
scene.add(new THREE.AmbientLight(0xffffff, 0.45));
const light = new THREE.DirectionalLight(0xffffff, 0.9);
light.position.set(3, 3, 4);
scene.add(light);

/* ---------- TEXTURE ---------- */
const size = 1024;
const c = document.createElement("canvas");
c.width = c.height = size;
const ctx = c.getContext("2d");

// sclera
ctx.fillStyle = "#f3f3f3";
ctx.fillRect(0, 0, size, size);

// shading
const shade = ctx.createRadialGradient(
  size * 0.35, size * 0.35, size * 0.15,
  size * 0.5, size * 0.5, size * 0.55
);
shade.addColorStop(0, "#ffffff");
shade.addColorStop(1, "#d0d0d0");
ctx.fillStyle = shade;
ctx.fillRect(0, 0, size, size);

// iris on equator
const irisX = size * 0.75;
const irisY = size * 0.5;
const irisR = 170;

const irisGrad = ctx.createRadialGradient(
  irisX, irisY, 20,
  irisX, irisY, irisR
);
irisGrad.addColorStop(0, "#1e6f8c");
irisGrad.addColorStop(1, "#0b2f3d");

ctx.fillStyle = irisGrad;
ctx.beginPath();
ctx.arc(irisX, irisY, irisR, 0, Math.PI * 2);
ctx.fill();

// pupil
ctx.fillStyle = "#000";
ctx.beginPath();
ctx.arc(irisX, irisY, 65, 0, Math.PI * 2);
ctx.fill();

const texture = new THREE.CanvasTexture(c);

/* ---------- EYEBALL ---------- */
const eye = new THREE.Mesh(
  new THREE.SphereGeometry(1, 96, 96),
  new THREE.MeshStandardMaterial({
    map: texture,
    roughness: 0.45,
    metalness: 0.05
  })
);
scene.add(eye);

/* ---------- MOUSE ---------- */
let mouseX = 0;
let mouseY = 0;

addEventListener("mousemove", e => {
  mouseX = (e.clientX / innerWidth - 0.5) * Math.PI * 0.6;
  mouseY = (e.clientY / innerHeight - 0.5) * Math.PI * 0.6;
});

/* ---------- RESIZE ---------- */
addEventListener("resize", () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});

/* ---------- ANIMATE ---------- */
function animate() {
  requestAnimationFrame(animate);

  // smooth, safe rotation
  eye.rotation.y += (mouseX - eye.rotation.y) * 0.08;
  eye.rotation.x += (mouseY - eye.rotation.x) * 0.08;

  renderer.render(scene, camera);
}
animate();
</script>

</body>
</html>
