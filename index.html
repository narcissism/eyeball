<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Eyeball</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #111;
}
canvas { display:block; }
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let w, h;
function resize(){
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* ---------- MOUSE ---------- */
let mouse = { x: w/2, y: h/2 };
window.addEventListener("mousemove", e=>{
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

/* ---------- EYE ---------- */
const eye = {
  radius: 120,
  irisRadius: 45,
  pupilRadius: 18,
  minPupil: 10,
  maxPupil: 28,
  rotX: 0,
  rotY: 0,
  targetRotX: 0,
  targetRotY: 0
};

/* ---------- BLOOD VESSELS ---------- */
const vessels = [];
for(let i=0;i<30;i++){
  vessels.push({
    baseAngle: Math.random() * Math.PI * 2,
    length: 40 + Math.random() * 60,
    wiggle: Math.random() * 0.5 + 0.2,
    pulsePhase: Math.random() * Math.PI * 2
  });
}

let time = 0;

/* ---------- DRAW ---------- */
function draw(){
  ctx.clearRect(0,0,w,h);
  time += 0.02;

  const cx = w/2;
  const cy = h/2;

  /* ---------- LOOK ROTATION ---------- */
  const dx = mouse.x - cx;
  const dy = mouse.y - cy;

  eye.targetRotX = Math.max(-1, Math.min(1, dx / 300));
  eye.targetRotY = Math.max(-1, Math.min(1, dy / 300));

  eye.rotX += (eye.targetRotX - eye.rotX) * 0.08;
  eye.rotY += (eye.targetRotY - eye.rotY) * 0.08;

  /* ---------- PUPIL DILATION ---------- */
  const dist = Math.hypot(dx, dy);
  const norm = Math.min(dist / 400, 1);
  const targetPupil =
    eye.maxPupil - norm * (eye.maxPupil - eye.minPupil);

  eye.pupilRadius += (targetPupil - eye.pupilRadius) * 0.08;

  ctx.save();
  ctx.translate(cx, cy);

  /* ---------- SPHERE ---------- */
  const lightX = -eye.rotX * eye.radius * 0.4;
  const lightY = -eye.rotY * eye.radius * 0.4;

  const scleraGrad = ctx.createRadialGradient(
    lightX,
    lightY,
    eye.radius * 0.2,
    0,0,
    eye.radius
  );
  scleraGrad.addColorStop(0,"#fff");
  scleraGrad.addColorStop(1,"#d6d6d6");

  ctx.fillStyle = scleraGrad;
  ctx.beginPath();
  ctx.arc(0,0,eye.radius,0,Math.PI*2);
  ctx.fill();

  /* ---------- PULSING VEINS ---------- */
  vessels.forEach(v=>{
    v.pulsePhase += 0.015;
    const pulse = Math.sin(v.pulsePhase + time) * 0.6 + 1;

    ctx.strokeStyle = `rgba(170,60,60,${0.22 * pulse})`;
    ctx.lineWidth = pulse * 1.1;

    let a = v.baseAngle + eye.rotX * 1.2;
    let r = eye.radius * 0.9;

    ctx.beginPath();
    ctx.moveTo(Math.cos(a)*r, Math.sin(a)*r);

    for(let i=0;i<6;i++){
      r -= (v.length * pulse) / 6;
      a += Math.sin(i + eye.rotY * 4) * v.wiggle;
      ctx.lineTo(Math.cos(a)*r, Math.sin(a)*r);
    }
    ctx.stroke();
  });

  /* ---------- IRIS ---------- */
  const irisX = eye.rotX * 22;
  const irisY = eye.rotY * 22;

  const irisGrad = ctx.createRadialGradient(
    irisX - 10,
    irisY - 10,
    6,
    irisX,
    irisY,
    eye.irisRadius
  );
  irisGrad.addColorStop(0,"#3b2a14");
  irisGrad.addColorStop(0.4,"#6f4e2c");
  irisGrad.addColorStop(0.8,"#9b7b3c");
  irisGrad.addColorStop(1,"#2a1b0c");

  ctx.fillStyle = irisGrad;
  ctx.beginPath();
  ctx.arc(irisX, irisY, eye.irisRadius, 0, Math.PI*2);
  ctx.fill();

  /* ---------- IRIS FIBERS ---------- */
  ctx.strokeStyle = "rgba(0,0,0,0.25)";
  for(let i=0;i<45;i++){
    const a = (i/45)*Math.PI*2;
    ctx.beginPath();
    ctx.moveTo(
      irisX + Math.cos(a)*6,
      irisY + Math.sin(a)*6
    );
    ctx.lineTo(
      irisX + Math.cos(a)*eye.irisRadius,
      irisY + Math.sin(a)*eye.irisRadius
    );
    ctx.stroke();
  }

  /* ---------- PUPIL ---------- */
  ctx.fillStyle = "#000";
  ctx.beginPath();
  ctx.arc(irisX, irisY, eye.pupilRadius, 0, Math.PI*2);
  ctx.fill();

  /* ---------- HIGHLIGHT ---------- */
  ctx.fillStyle = "rgba(255,255,255,0.6)";
  ctx.beginPath();
  ctx.arc(
    lightX - 15,
    lightY - 15,
    14,
    0,
    Math.PI*2
  );
  ctx.fill();

  ctx.restore();
  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
