<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Eyeball</title>
<style>
  body { margin:0; overflow:hidden; background:#000; }
</style>
</head>
<body>

<script src="https://unpkg.com/three@0.155.0/build/three.min.js"></script>

<script>
if (typeof THREE === "undefined") {
  alert("THREE.js failed to load");
  throw new Error("THREE.js not loaded");
}

/* ---------- SCENE ---------- */
const scene = new THREE.Scene();

/* ---------- CAMERA ---------- */
const camera = new THREE.PerspectiveCamera(
  45,
  window.innerWidth / window.innerHeight,
  0.1,
  100
);
camera.position.z = 3;

/* ---------- RENDERER ---------- */
const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* ---------- LIGHTING ---------- */
scene.add(new THREE.AmbientLight(0xffffff, 0.45));

const keyLight = new THREE.DirectionalLight(0xffffff, 0.9);
keyLight.position.set(3, 3, 4);
scene.add(keyLight);

/* ---------- EYEBALL TEXTURE ---------- */
const texCanvas = document.createElement("canvas");
texCanvas.width = 1024;
texCanvas.height = 1024;
const ctx = texCanvas.getContext("2d");

// sclera base
ctx.fillStyle = "#f4f4f4";
ctx.fillRect(0, 0, 1024, 1024);

// spherical shading
const scleraShade = ctx.createRadialGradient(
  350, 350, 120,
  512, 512, 520
);
scleraShade.addColorStop(0, "#ffffff");
scleraShade.addColorStop(1, "#d6d6d6");
ctx.fillStyle = scleraShade;
ctx.fillRect(0, 0, 1024, 1024);

// iris
const irisX = 512;
const irisY = 512;
const irisRadius = 170;

// iris gradient
const irisGrad = ctx.createRadialGradient(
  irisX, irisY, 20,
  irisX, irisY, irisRadius
);
irisGrad.addColorStop(0, "#1a5f7a");
irisGrad.addColorStop(1, "#0b2f3d");
ctx.fillStyle = irisGrad;
ctx.beginPath();
ctx.arc(irisX, irisY, irisRadius, 0, Math.PI * 2);
ctx.fill();

// iris striations
ctx.strokeStyle = "rgba(255,255,255,0.08)";
for (let i = 0; i < 80; i++) {
  const a = Math.random() * Math.PI * 2;
  ctx.beginPath();
  ctx.moveTo(
    irisX + Math.cos(a) * 20,
    irisY + Math.sin(a) * 20
  );
  ctx.lineTo(
    irisX + Math.cos(a) * irisRadius,
    irisY + Math.sin(a) * irisRadius
  );
  ctx.stroke();
}

// pupil
ctx.fillStyle = "#000";
ctx.beginPath();
ctx.arc(irisX, irisY, 65, 0, Math.PI * 2);
ctx.fill();

// subtle limbal ring
ctx.strokeStyle = "rgba(0,0,0,0.4)";
ctx.lineWidth = 6;
ctx.beginPath();
ctx.arc(irisX, irisY, irisRadius, 0, Math.PI * 2);
ctx.stroke();

const eyeTexture = new THREE.CanvasTexture(texCanvas);

/* ---------- EYEBALL ---------- */
const geometry = new THREE.SphereGeometry(1, 96, 96);
const material = new THREE.MeshStandardMaterial({
  map: eyeTexture,
  roughness: 0.45,
  metalness: 0.05
});

const eyeball = new THREE.Mesh(geometry, material);
scene.add(eyeball);

/* ---------- MOUSE ROTATION ---------- */
let targetX = 0;
let targetY = 0;

window.addEventListener("mousemove", e => {
  targetX = (e.clientX / window.innerWidth - 0.5) * Math.PI;
  targetY = (e.clientY / window.innerHeight - 0.5) * Math.PI;
});

/* ---------- RESIZE ---------- */
window.addEventListener("resize", () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

/* ---------- ANIMATION ---------- */
function animate() {
  requestAnimationFrame(animate);

  eyeball.rotation.y += (targetX - eyeball.rotation.y) * 0.08;
  eyeball.rotation.x += (targetY - eyeball.rotation.x) * 0.08;

  renderer.render(scene, camera);
}

animate();
</script>

</body>
</html>
